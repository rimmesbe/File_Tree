<!--

TreeView
=========
Represent the following data structure as an expandable TreeView.

var items = {
    label: 'Node Label',
    items: [
        {
            label: 'Child Node Label',
            items: [
                {
                    label: 'Child Node Label',
                    items: [
                        {
                            label: 'Child Node Label',
                            items: [

                            ]
                        },
                        {
                            label: 'Child Node Label',
                        },
                        {
                            label: 'Leaf Node Label'
                        }
                    ]
                }
            ]
        },
        {
            label: 'Leaf Node Label'
        }
    ]
};

The TreeView should have the following features:

1. It should be able to read a hierarchical data-structure like the one shown above.
2. It should provide expand/collapse behavior at the node level
3. By default the TreeView should expand all levels
4. Define an API that makes it easier to use

Notes
======
- You cannot use any UI libraries and the tree-view has to be built from scratch
- The only permitted library is jQuery and Bootstrap
- Use best practices to write clean, well-refactored code
- Bonus points for styling the TreeView
- Bonus for writing Unit Tests
- You have 24 hours to complete the exercise

 -->

 <!DOCTYPE html>
 <html>
 <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
     <title>TreeView</title>
     <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
     <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 </head>
 <body>

 <div class="container">
     <!-- The TreeView DOM goes here -->
 </div>

 <script type="text/javascript">
    var items = {
    label: 'Node Label',
    items: [
        {
            label: 'Child Node Label',
            items: [
                {
                    label: 'Child Node Label',
                    items: [
                        {
                            label: 'Child Node Label',
                            items: [

                            ]
                        },
                        {
                            label: 'Child Node Label',
                        },
                        {
                            label: 'Leaf Node Label'
                        }
                    ]
                }
            ]
        },
        {
            label: 'Leaf Node Label'
        }
    ]
};
     // Build the TreeView and render
    var _ul_ = document.createElement('ul'),
        _li_ = document.createElement('li'),
        _span_ = document.createElement('span'),
        _h3_ = document.createElement('h3'),
        _a_ = document.createElement('a');


    var buildTree = function(data, idx) {
        var count = idx || 0
        var ul = _ul_.cloneNode(false);
        ul.setAttribute('id', ('branch'+count.toString()));

        for(var key in data) {
            console.log(key + ":" + data[key])
            if(data.hasOwnProperty(key) && key == "label"){
                var h3 = _h3_.cloneNode(false);
                var a = _a_.cloneNode(false);
                a.appendChild(document.createTextNode(data[key]));
                a.setAttribute('href', ('#branch'+count.toString()));
                h3.appendChild(a);
                ul.appendChild(h3);
            } else if(data.hasOwnProperty(key) && key == "items"){
                // create item element and append
                var li = _li_.cloneNode(false);
                li.appendChild(document.createTextNode(data[key]));
                ul.appendChild(li);
                for(var i=0; i<data.items.length; i++){
                    li.appendChild(buildTree(data.items[i], count+1));
                }
            }
        }

        return ul;
    };

    document.querySelector('.container').appendChild(buildTree(items));
    document.querySelector('a').setAttribute('data-toggle', 'collapse');
    document.querySelector('ul').setAttribute('class', 'collapse in');
 </script>
 </body>
 </html>