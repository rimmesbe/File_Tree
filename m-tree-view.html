<!--

TreeView
=========
Represent the following data structure as an expandable TreeView.

var items = {
    label: 'Node Label',
    items: [
        {
            label: 'Child Node Label',
            items: [
                {
                    label: 'Child Node Label',
                    items: [
                        {
                            label: 'Child Node Label',
                            items: [

                            ]
                        },
                        {
                            label: 'Child Node Label',
                        },
                        {
                            label: 'Leaf Node Label'
                        }
                    ]
                }
            ]
        },
        {
            label: 'Leaf Node Label'
        }
    ]
};

The TreeView should have the following features:

1. It should be able to read a hierarchical data-structure like the one shown above.
2. It should provide expand/collapse behavior at the node level
3. By default the TreeView should expand all levels
4. Define an API that makes it easier to use

Notes
======
- You cannot use any UI libraries and the tree-view has to be built from scratch
- The only permitted library is jQuery and Bootstrap
- Use best practices to write clean, well-refactored code
- Bonus points for styling the TreeView
- Bonus for writing Unit Tests
- You have 24 hours to complete the exercise

 -->

 <!DOCTYPE html>
 <html>
 <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
     <title>TreeView</title>
     <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
     <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 </head>
 <body>

 <div class="container">
     <!-- The TreeView DOM goes here -->
 </div>

 <script type="text/javascript">

    var items = {
    label: 'Node Label',
    items: [
        {
            label: 'Child Node Label',
            items: [
                {
                    label: 'Child Node Label',
                    items: [
                        {
                            label: 'Child Node Label',
                        },
                        {
                            label: 'Child Node Label',
                        },
                        {
                            label: 'Leaf Node Label'
                        }
                    ]
                },
                {
                    label: 'Leaf Node'
                }
            ]
        },
        {
            label: 'Leaf Node Label',
            items: [
                {
                    label: 'Child Node Label',
                    items: [
                        {
                            label: 'Child Node Label',
                        },
                        {
                            label: 'Child Node Label',
                        },
                        {
                            label: 'Leaf Node Label'
                        }
                    ]
                },
                {
                    label: 'Leaf Node'
                }
            ]
        }
    ]
};
     // Build the TreeView and render
    var _ul_ = document.createElement('ul'),
        _li_ = document.createElement('li'),
        _div_ = document.createElement('div'),
        _h3_ = document.createElement('h3'),
        _a_ = document.createElement('a');

    var global_count = 0;

    var buildTree = function(data) {
        var count = 0;
        var div = _div_.cloneNode(false);
        div.appendChild(buildBranch(data, div, count));
        return div;
    };

    var buildLabel = function(count, label){
        var h3 = _h3_.cloneNode(false);
        var a = _a_.cloneNode(false);
        a.appendChild(document.createTextNode(label));
        a.setAttribute('href', '.branch'+count.toString());
        a.setAttribute('data-toggle', 'collapse');
        h3.appendChild(a);
        return h3;
    };

    var buildBranch = function(data, element, current_count) {
        var count = current_count;
        var div = element;
        var ul = _ul_.cloneNode(false);
        ul.setAttribute('class', 'branch'+count.toString());
        div.appendChild(buildLabel(count, data["label"]));

        if(data.hasOwnProperty("items")){
            for(var i=0; i<data.items.length; i++){
                global_count += 1;
                var li = _li_.cloneNode(false);
                var div = _div_.cloneNode(false);
                div.appendChild(buildBranch(data.items[i], div, global_count));
                li.appendChild(div);
                ul.appendChild(li);
            }
        }
        return ul;
    };

    document.querySelector('.container').appendChild(buildTree(items));
 </script>
 </body>
 </html>